## 基于CTP自动化交易系统



[TOC]

### **一、简介**

当前和shige一起做的简易的CTP自动化交易系统，初步的设想是可以完成pair trading。此文档简单介绍我们要做的产品的功能，然后系统工程根据此文档进行划分和开发。

整个系统可以简单分为前台和后台两部分。下面分别介绍。

### 二、前台

前台部分主要是为用户的交互提供接口。接收用户输入的数据和展示相应的数据给用户。目前预计前台会分为以下几部分。

#### 1. 登陆系统

提供登陆交互相关功能。--》适哥之前小需求，记住账号和相关用户数据。

#### 2. 市场数据显示区

主要展示相关产品的行情数据。需要展示的数据主要是：

- 当前所有产品的市场实时数据
- 组合产品（价差的）实时数据
- 组合产品的数据曲线--》绘制图像
- 选择的单个产品的实时图像（可选）

#### 3. 委托显示区

主要实时显示交易过程中的委托单的情况，以及记录相关的历史交易情况（便于回溯）。

撤单功能也需要在这个部分实现。

pair trading的大部分异常情况都会发生在这个部分。比如说瘸腿：

![image-20210223230436039](picture\image-20210223230436039.png)

因此此部分还需要设定更多的异常处理的交互部分。

#### 4. 持仓显示区

显示当前的用户的持仓信息。--》按照pair对显示持仓信息，并显示组合产品的相关收益等信息。

### 三、后台

后台主要包含程序的逻辑与处理，以及与前台的交互和与交易系统的服务器之间的交互。

#### 1. CTP 行情库

主要处理和行情数据相关的功能，大部分都是查询功能，此功能可以不需要账户登录也可以使用

#### 2. CTP 交易库

此部分处理合约交易部分的所有功能，以及持仓情况的查询。包括用户的登录。主要连接服务器和本地处理逻辑

#### 3. pair 产品功能

组合两个产品，满足pair trading 对两个产品的交易流程和处理的需求。处理相关数据，并连接前台显示。

#### 4. QT显示库支持

为前台的各个交互功能做支撑，并且将前台数据连接到各个后台模块

#### 5. 数据存储与读取功能

- 登陆、常用数据的存储，在程序重新启动时可以直接加载
- 历史数据的存储可以存为CSV或者存在数据库当中

#### 6. 对接策略API接口

为策略提供相关API，运行时可以接收策略相关数据，并开始交易。

![image-20210223233038247](picture\image-20210223233038247.png)































