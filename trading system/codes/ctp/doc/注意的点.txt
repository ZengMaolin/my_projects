Quant 6:39:22
行情模块，好像是需要订阅才有的，所以不需要订阅所有品种的行情，不然解析那个行情包的话要占用更多时间

Quant 6:52:43
原先的设计中，持仓界面每个挂单，都是一条记录，记录中有一列是个按钮功能，就是撤单，如果挂单的是b，那么这个session就结束了，表示用户暂时不想在此时间交易。如果挂单的是a，那么就是按腐腿处理流程来进行

Quant 6:53:26
这个按钮不要放在其他地方，因为同一时刻，我有可能几个pair同时在进行

Quant 7:36:30
另一个我能想起来的点，平台的稳定性，做起来后，你写一个自动化的模拟流程，比如发a单撤a单再发再撤，反复做几十几百次，然后不断发a的对价单，收到成交回报后写库，不断发b的对价单，成交后发a的对价单，大量，高速持续地撤，看看平台有没有蹦

Quant 8:13:19
a单用的一定是对价单了，因为它是对冲用的。b单的话，我之前说过，一般情况下用自己这边的限价单。但是在开发过程中，请提供以下选择：1.用对价单，这样你可以快速进行进场和出场的交易测试，以及，将来如果市场有瞬间的失衡，平台能快速扑捉到这个miss price。

Quant 8:15:30
2. b挂在自己这边的第二档价位（bid2 or ask2）。这是一种等待策略。如果行情往挂单的价位move，待第一档被fill掉或者被撤单，那我原来挂在第二档的单子就变成了第一档

Quant 8:17:40
说到这里，你文档的第三条，pair产品功能这个模块，可能要详细一点。里面应该有个监控功能，如果我在挂着b单，且b是在第一档，那么如果价差小于我设定的目标价，则需要撤单

a和b，我都假设b为次活跃品种，买卖价差理论上比a的买卖价差要大。 我就不想跨过b的买卖价差。 那么我就需要在自己的那一边挂限价单进行交易（买b的话挂买1价，卖b的话挂卖1价），为了保证ab同时在场，b撮合之后，a需要离开发出对价单（买a的话使用卖1价，卖a的话使用买1价）。 这是大的原则。 细节方面，就算a使用的是对价，也有很大比例，是没有成交的，因为市场价格move了，往不利于我们的方向，那么a就挂在那里等待。我们把这种情况称为‘腐腿’，也即一条腿（对冲的那条）没能按计划完成交易。 这个时候，需要提供一个撤单的选择，如果用户点击了撤单按钮，那么挂着的a会被撤回，并且，在手动撤单成功回报后，马上发出新的对价单（按新的行情）。 （如果还是无法撮合成交（市场剧烈波动），那撤单的选择还是有的）。 直至a入场成功。 （腐腿的情况，意味着入场成本增加了，不利）

Quant 2021/2/23 20:53:44
我再简述一下，你可以以交易者的身份代入：以交易a-b为例，入场即是买入a，卖出b。b为此活跃品种。那我不能跨过b的买卖价差，我需要在b的卖一价挂个单，等待被撮合。等待过程中，如果价差被差，就撤单，如果价差到了阈值点，就下单。b挂掉的时候，我是需要看到的，那这个模块就是挂掉界面，上面显示ID，方向，数量，离最近的成交价的距离等信息

Quant 2021/2/23 20:56:09
如果b被撮合成交了，那么会收到成交回报。注意，极大可能，b是部分成交。比如发了两手，只有一手被撮合了。那么一手的a对价单将发出去。 a的单子出现在挂掉界面。然后，在持仓界面，会显示b的成交信息，包括ID，方向，数量，成交均价，持仓盈亏等信息。

Quant 2021/2/23 20:57:17
待a成交了，a也进入持仓界面，但是是和b一起在同一行。比如明天，我要平仓，那也是这一对ab进行平仓。

Quant 2021/2/23 20:59:03
ab是一个单位，进场和出场，都是一一对应的。今天我做了两次交易，第一次买了两手ab，第二次买了三手ab，则持仓界面需要保存两条ab的记录。我明天可以平两手的ab，也可以平三手的ab

Quant 2021/2/23 21:01:10
务必把ab理解为一个我们自己合成的新品种，后面的代码就顺利了


